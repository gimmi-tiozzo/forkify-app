FROM node:15-alpine

WORKDIR /app
COPY package.json .
RUN npm install
COPY . .

ARG DEFAULT_PORT=8000
ENV SERVER_PORT=${DEFAULT_PORT}
ENV AUTH_PORT=8080
ENV SERVER_HOST=ff-au
ENV AUTH_URL=http://${SERVER_HOST}:${AUTH_PORT}/login

EXPOSE $DEFAULT_PORT
CMD [ "npm", "run", "build" ]
