version: "3.8"
services:
    forkify-au:
        image: gimmitest/forkify-au
        build:
            context: auth
            dockerfile: Dockerfile
            args:
                DEFAULT_PORT: 8080
        container_name: ff-au
        env_file: auth/.env
        volumes:
            - D:\courses\my\forkify-app\auth:/app
        networks:
            - forkify-net
    forkify-be:
        image: gimmitest/forkify-be
        build:
            context: backend
            dockerfile: Dockerfile
            args:
                DEFAULT_PORT: 8000
        container_name: ff-be
        environment:
            - AUTH_PORT=8080
        env_file: backend/.env
        ports:
            - 8000:8000
        volumes:
            - /app/node_modules
            - D:\courses\my\forkify-app\backend:/app
            - be-logs:/app/logs
        networks:
            - forkify-net
        depends_on:
            - forkify-au
    forkify-fe:
        image: gimmitest/forkify-fe
        build:
            context: frontend
            dockerfile: Dockerfile
        container_name: ff-fe
        ports:
            - 6768:80
        networks:
            - forkify-net
        depends_on:
            - forkify-be
volumes:
    be-logs:
networks:
    forkify-net:
